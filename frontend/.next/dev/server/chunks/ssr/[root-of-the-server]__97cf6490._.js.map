{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///D:/Lead-management-system/frontend/app/services/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_BASE_URL,\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (typeof window !== 'undefined') {\r\n      const status = error.response?.status;\r\n\r\n      if (status === 401) {\r\n        console.warn('Unauthorized - redirecting to login');\r\n        localStorage.removeItem('token');\r\n        window.location.href = '/login';\r\n      }\r\n\r\n      if (status === 500) {\r\n        console.error('Server error');\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,OAAO;IACP,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC;;IAcA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///D:/Lead-management-system/frontend/app/services/leadService.tsx"],"sourcesContent":["import api from './api';\r\n\r\nconst leadService = {\r\n  getLeads: (params?: Record<string, any>) =>\r\n    api.get('/leads', { params }),\r\n\r\n  getLeadById: (id: number) =>\r\n    api.get(`/leads/${id}/timeline`),\r\n\r\n  createLead: (data: any) =>\r\n    api.post('/leads', data),\r\n\r\n  updateStatus: (id: number, status: string) =>\r\n    api.put(`/leads/${id}/status`, { status }),\r\n  \r\n  CheckDuplicateLead: (data: any) =>\r\n    api.post('/leads/check-duplicate', data),\r\n};\r\n\r\nexport default leadService;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc;IAClB,UAAU,CAAC,SACT,iIAAG,CAAC,GAAG,CAAC,UAAU;YAAE;QAAO;IAE7B,aAAa,CAAC,KACZ,iIAAG,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,GAAG,SAAS,CAAC;IAEjC,YAAY,CAAC,OACX,iIAAG,CAAC,IAAI,CAAC,UAAU;IAErB,cAAc,CAAC,IAAY,SACzB,iIAAG,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,EAAE;YAAE;QAAO;IAE1C,oBAAoB,CAAC,OACnB,iIAAG,CAAC,IAAI,CAAC,0BAA0B;AACvC;uCAEe"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///D:/Lead-management-system/frontend/app/leads/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useMemo } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Chip,\r\n  MenuItem,\r\n  Select,\r\n  FormControl,\r\n  InputLabel,\r\n  Pagination,\r\n  Stack,\r\n  Button \r\n} from '@mui/material';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport leadService from '../services/leadService';\r\n\r\n/* ================= TYPES ================= */\r\n\r\ninterface AssignedUser {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\ninterface Lead {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  status: string;\r\n  source?: string;\r\n  assignedUser?: AssignedUser | null;\r\n  updatedAt: string;\r\n}\r\n\r\n/* ================= COMPONENT ================= */\r\n\r\nexport default function LeadsPage() {\r\n  const router = useRouter();\r\n  const [leads, setLeads] = useState<Lead[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n\r\n  // Filters\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [sourceFilter, setSourceFilter] = useState<string>('all');\r\n\r\n  // Pagination\r\n  const [currentPage, setCurrentPage] = useState<number>(1);\r\n  const itemsPerPage = 10;\r\n\r\n  useEffect(() => {\r\n    fetchLeads();\r\n  }, []);\r\n\r\n  const fetchLeads = async (): Promise<void> => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await leadService.getLeads();\r\n      setLeads(res.data.data.rows);\r\n    } catch (error) {\r\n      console.error('Failed to fetch leads', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filtered leads\r\n  const filteredLeads = useMemo(() => {\r\n    return leads.filter((lead) => {\r\n      const statusMatch =\r\n        statusFilter === 'all' ? true : lead.status === statusFilter;\r\n      const sourceMatch =\r\n        sourceFilter === 'all' ? true : lead.source === sourceFilter;\r\n      return statusMatch && sourceMatch;\r\n    });\r\n  }, [leads, statusFilter, sourceFilter]);\r\n\r\n  // Pagination logic\r\n  const totalPages = Math.ceil(filteredLeads.length / itemsPerPage);\r\n  const paginatedLeads = useMemo(() => {\r\n    const startIndex = (currentPage - 1) * itemsPerPage;\r\n    return filteredLeads.slice(startIndex, startIndex + itemsPerPage);\r\n  }, [filteredLeads, currentPage]);\r\n\r\n  return (\r\n    <Box p={3}>\r\n      <Typography variant=\"h5\" fontWeight={600} mb={2}>\r\n        Leads\r\n      </Typography>\r\n\r\n      {/* Filters */}\r\n      <Stack direction=\"row\" spacing={2} mb={2}>\r\n        <FormControl size=\"small\">\r\n          <InputLabel>Status</InputLabel>\r\n          <Select\r\n            value={statusFilter}\r\n            label=\"Status\"\r\n            onChange={(e) => {\r\n              setStatusFilter(e.target.value);\r\n              setCurrentPage(1); // Reset page on filter change\r\n            }}\r\n          >\r\n            <MenuItem value=\"all\">All</MenuItem>\r\n            <MenuItem value=\"new\">New</MenuItem>\r\n            <MenuItem value=\"contacted\">Contacted</MenuItem>\r\n            <MenuItem value=\"lost\">Lost</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n\r\n        <FormControl size=\"small\">\r\n          <InputLabel>Source</InputLabel>\r\n          <Select\r\n            value={sourceFilter}\r\n            label=\"Source\"\r\n            onChange={(e) => {\r\n              setSourceFilter(e.target.value);\r\n              setCurrentPage(1);\r\n            }}\r\n          >\r\n            <MenuItem value=\"all\">All</MenuItem>\r\n            <MenuItem value=\"website\">Website</MenuItem>\r\n            <MenuItem value=\"referral\">Referral</MenuItem>\r\n            <MenuItem value=\"ads\">Ads</MenuItem>\r\n            <MenuItem value=\"social\">Social</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n\r\n          <Button\r\n            variant=\"contained\"\r\n            startIcon={<AddIcon />}\r\n            onClick={() => router.push('/leads/new')}\r\n          >\r\n            Create New Lead\r\n          </Button>\r\n\r\n      </Stack>\r\n\r\n  \r\n\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Name</TableCell>\r\n              <TableCell>Email</TableCell>\r\n              <TableCell>Status</TableCell>\r\n              <TableCell>Source</TableCell>\r\n              <TableCell>Assigned User</TableCell>\r\n              <TableCell>Last Activity</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n\r\n          <TableBody>\r\n            {paginatedLeads.map((lead) => (\r\n              <TableRow\r\n                key={lead.id}\r\n                hover\r\n                sx={{ cursor: 'pointer' }}\r\n                onClick={() => router.push(`/leads/${lead.id}`)}\r\n              >\r\n                <TableCell>{lead.name}</TableCell>\r\n                <TableCell>{lead.email}</TableCell>\r\n                <TableCell>\r\n                  <Chip\r\n                    label={lead.status}\r\n                    size=\"small\"\r\n                    color={\r\n                      lead.status === 'converted'\r\n                        ? 'success'\r\n                        : lead.status === 'lost'\r\n                        ? 'error'\r\n                        : 'default'\r\n                    }\r\n                  />\r\n                </TableCell>\r\n                <TableCell>{lead.source || '-'}</TableCell>\r\n                <TableCell>{lead.assignedUser?.name || '-'}</TableCell>\r\n                <TableCell>\r\n                  {new Date(lead.updatedAt).toLocaleString()}\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n\r\n            {!loading && filteredLeads.length === 0 && (\r\n              <TableRow>\r\n                <TableCell colSpan={6} align=\"center\">\r\n                  No leads found\r\n                </TableCell>\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <Stack mt={2} alignItems=\"center\">\r\n          <Pagination\r\n            count={totalPages}\r\n            page={currentPage}\r\n            onChange={(_, page) => setCurrentPage(page)}\r\n            color=\"primary\"\r\n          />\r\n        </Stack>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA;AACA;AAxBA;;;;;;;AA6Ce,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAU;IAEhD,UAAU;IACV,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAS;IACzD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAS;IAEzD,aAAa;IACb,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAS;IACvD,MAAM,eAAe;IAErB,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,aAAa;QACjB,IAAI;YACF,WAAW;YACX,MAAM,MAAM,MAAM,0IAAW,CAAC,QAAQ;YACtC,SAAS,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI;QAC7B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC,SAAU;YACR,WAAW;QACb;IACF;IAEA,iBAAiB;IACjB,MAAM,gBAAgB,IAAA,gNAAO,EAAC;QAC5B,OAAO,MAAM,MAAM,CAAC,CAAC;YACnB,MAAM,cACJ,iBAAiB,QAAQ,OAAO,KAAK,MAAM,KAAK;YAClD,MAAM,cACJ,iBAAiB,QAAQ,OAAO,KAAK,MAAM,KAAK;YAClD,OAAO,eAAe;QACxB;IACF,GAAG;QAAC;QAAO;QAAc;KAAa;IAEtC,mBAAmB;IACnB,MAAM,aAAa,KAAK,IAAI,CAAC,cAAc,MAAM,GAAG;IACpD,MAAM,iBAAiB,IAAA,gNAAO,EAAC;QAC7B,MAAM,aAAa,CAAC,cAAc,CAAC,IAAI;QACvC,OAAO,cAAc,KAAK,CAAC,YAAY,aAAa;IACtD,GAAG;QAAC;QAAe;KAAY;IAE/B,qBACE,8OAAC,+LAAG;QAAC,GAAG;;0BACN,8OAAC,2NAAU;gBAAC,SAAQ;gBAAK,YAAY;gBAAK,IAAI;0BAAG;;;;;;0BAKjD,8OAAC,uMAAK;gBAAC,WAAU;gBAAM,SAAS;gBAAG,IAAI;;kCACrC,8OAAC,+NAAW;wBAAC,MAAK;;0CAChB,8OAAC,2NAAU;0CAAC;;;;;;0CACZ,8OAAC,2MAAM;gCACL,OAAO;gCACP,OAAM;gCACN,UAAU,CAAC;oCACT,gBAAgB,EAAE,MAAM,CAAC,KAAK;oCAC9B,eAAe,IAAI,8BAA8B;gCACnD;;kDAEA,8OAAC,mNAAQ;wCAAC,OAAM;kDAAM;;;;;;kDACtB,8OAAC,mNAAQ;wCAAC,OAAM;kDAAM;;;;;;kDACtB,8OAAC,mNAAQ;wCAAC,OAAM;kDAAY;;;;;;kDAC5B,8OAAC,mNAAQ;wCAAC,OAAM;kDAAO;;;;;;;;;;;;;;;;;;kCAI3B,8OAAC,+NAAW;wBAAC,MAAK;;0CAChB,8OAAC,2NAAU;0CAAC;;;;;;0CACZ,8OAAC,2MAAM;gCACL,OAAO;gCACP,OAAM;gCACN,UAAU,CAAC;oCACT,gBAAgB,EAAE,MAAM,CAAC,KAAK;oCAC9B,eAAe;gCACjB;;kDAEA,8OAAC,mNAAQ;wCAAC,OAAM;kDAAM;;;;;;kDACtB,8OAAC,mNAAQ;wCAAC,OAAM;kDAAU;;;;;;kDAC1B,8OAAC,mNAAQ;wCAAC,OAAM;kDAAW;;;;;;kDAC3B,8OAAC,mNAAQ;wCAAC,OAAM;kDAAM;;;;;;kDACtB,8OAAC,mNAAQ;wCAAC,OAAM;kDAAS;;;;;;;;;;;;;;;;;;kCAI3B,8OAAC,2MAAM;wBACL,SAAQ;wBACR,yBAAW,8OAAC,mKAAO;;;;;wBACnB,SAAS,IAAM,OAAO,IAAI,CAAC;kCAC5B;;;;;;;;;;;;0BAQL,8OAAC,2OAAc;gBAAC,WAAW,uMAAK;0BAC9B,cAAA,8OAAC,uMAAK;;sCACJ,8OAAC,uNAAS;sCACR,cAAA,8OAAC,mNAAQ;;kDACP,8OAAC,uNAAS;kDAAC;;;;;;kDACX,8OAAC,uNAAS;kDAAC;;;;;;kDACX,8OAAC,uNAAS;kDAAC;;;;;;kDACX,8OAAC,uNAAS;kDAAC;;;;;;kDACX,8OAAC,uNAAS;kDAAC;;;;;;kDACX,8OAAC,uNAAS;kDAAC;;;;;;;;;;;;;;;;;sCAIf,8OAAC,uNAAS;;gCACP,eAAe,GAAG,CAAC,CAAC,qBACnB,8OAAC,mNAAQ;wCAEP,KAAK;wCACL,IAAI;4CAAE,QAAQ;wCAAU;wCACxB,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE;;0DAE9C,8OAAC,uNAAS;0DAAE,KAAK,IAAI;;;;;;0DACrB,8OAAC,uNAAS;0DAAE,KAAK,KAAK;;;;;;0DACtB,8OAAC,uNAAS;0DACR,cAAA,8OAAC,mMAAI;oDACH,OAAO,KAAK,MAAM;oDAClB,MAAK;oDACL,OACE,KAAK,MAAM,KAAK,cACZ,YACA,KAAK,MAAM,KAAK,SAChB,UACA;;;;;;;;;;;0DAIV,8OAAC,uNAAS;0DAAE,KAAK,MAAM,IAAI;;;;;;0DAC3B,8OAAC,uNAAS;0DAAE,KAAK,YAAY,EAAE,QAAQ;;;;;;0DACvC,8OAAC,uNAAS;0DACP,IAAI,KAAK,KAAK,SAAS,EAAE,cAAc;;;;;;;uCAvBrC,KAAK,EAAE;;;;;gCA4Bf,CAAC,WAAW,cAAc,MAAM,KAAK,mBACpC,8OAAC,mNAAQ;8CACP,cAAA,8OAAC,uNAAS;wCAAC,SAAS;wCAAG,OAAM;kDAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAU/C,aAAa,mBACZ,8OAAC,uMAAK;gBAAC,IAAI;gBAAG,YAAW;0BACvB,cAAA,8OAAC,2NAAU;oBACT,OAAO;oBACP,MAAM;oBACN,UAAU,CAAC,GAAG,OAAS,eAAe;oBACtC,OAAM;;;;;;;;;;;;;;;;;AAMlB"}}]
}