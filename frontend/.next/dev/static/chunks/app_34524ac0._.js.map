{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Lead-management-system/frontend/app/services/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_BASE_URL,\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (typeof window !== 'undefined') {\r\n      const status = error.response?.status;\r\n\r\n      if (status === 401) {\r\n        console.warn('Unauthorized - redirecting to login');\r\n        localStorage.removeItem('token');\r\n        window.location.href = '/login';\r\n      }\r\n\r\n      if (status === 500) {\r\n        console.error('Server error');\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;AAGW;AAHX;;AAEA,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,OAAO;IACP,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,wCAAmC;QACjC,MAAM,SAAS,MAAM,QAAQ,EAAE;QAE/B,IAAI,WAAW,KAAK;YAClB,QAAQ,IAAI,CAAC;YACb,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;QAEA,IAAI,WAAW,KAAK;YAClB,QAAQ,KAAK,CAAC;QAChB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///D:/Lead-management-system/frontend/app/services/leadService.tsx"],"sourcesContent":["import api from './api';\r\n\r\nconst leadService = {\r\n  getLeads: (params?: Record<string, any>) =>\r\n    api.get('/leads', { params }),\r\n\r\n  getLeadById: (id: number) =>\r\n    api.get(`/leads/${id}/timeline`),\r\n\r\n  createLead: (data: any) =>\r\n    api.post('/leads', data),\r\n\r\n  updateStatus: (id: number, status: string) =>\r\n    api.put(`/leads/${id}/status`, { status }),\r\n  \r\n  CheckDuplicateLead: (data: any) =>\r\n    api.post('/leads/check-duplicate', data),\r\n};\r\n\r\nexport default leadService;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc;IAClB,UAAU,CAAC,SACT,oIAAG,CAAC,GAAG,CAAC,UAAU;YAAE;QAAO;IAE7B,aAAa,CAAC,KACZ,oIAAG,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,GAAG,SAAS,CAAC;IAEjC,YAAY,CAAC,OACX,oIAAG,CAAC,IAAI,CAAC,UAAU;IAErB,cAAc,CAAC,IAAY,SACzB,oIAAG,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,EAAE;YAAE;QAAO;IAE1C,oBAAoB,CAAC,OACnB,oIAAG,CAAC,IAAI,CAAC,0BAA0B;AACvC;uCAEe"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///D:/Lead-management-system/frontend/app/leads/new/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Paper,\r\n  Stack,\r\n  Alert,\r\n  MenuItem,\r\n    Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  LinearProgress,\r\n  Divider,\r\n  Chip\r\n} from '@mui/material';\r\nimport leadService from '../../services/leadService';\r\n\r\nexport default function CreateLeadPage() {\r\n  const router = useRouter();\r\n  const [duplicateError, setDuplicateError] = useState('');\r\n  const [duplicates, setDuplicates] = useState<any[]>([]);\r\n  const [showDuplicateModal, setShowDuplicateModal] = useState(false);\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    email: '',\r\n    phone: '',\r\n    source: '',\r\n    status: 'new',\r\n  });\r\n\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const validateForm = () => {\r\n    if (!form.name.trim()) return 'Name is required';\r\n    if (!form.email.trim()) {\r\n      return 'Email is required';\r\n    }\r\n    if (!form.phone.trim()) {\r\n      return 'Phone is required';\r\n    }\r\n    if (!form.source) return 'Source is required';\r\n    if (!form.status) return 'Status is required';\r\n\r\n   \r\n\r\n    return '';\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    const validationError = validateForm();\r\n    if (validationError) {\r\n      setError(validationError);\r\n      return;\r\n    }\r\n\r\n    setError('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Duplicate detection\r\n      const dupRes = await leadService.CheckDuplicateLead(form);\r\n      console.log('Duplicate check response:', dupRes.data.data);\r\n    //   const matches = dupRes.data.data.confidence > 50;\r\n      const matches = 1;\r\n\r\n      if (matches) {\r\n        //   setDuplicateError(\r\n        //         'Potential duplicate leads found. Please review before creating.'\r\n        //     );\r\n            setDuplicates(dupRes.data.data.matches);\r\n            setShowDuplicateModal(true);\r\n            setLoading(false);\r\n            return;\r\n      }\r\n\r\n      const res = await leadService.createLead(form);\r\n      router.push(`/leads/${res.data.data.lead.id}`);\r\n    } catch {\r\n      setError('Failed to create lead');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createLead = async () => {\r\n    try {\r\n        const res = await leadService.createLead(form);\r\n        router.push(`/leads/${res.data.data.lead.id}`);\r\n    } catch {\r\n        setError('Failed to create lead');\r\n        setLoading(false);\r\n    }\r\n    };\r\n\r\n\r\n  return (\r\n    <Box p={3}>\r\n      <Typography variant=\"h5\" fontWeight={600} mb={2}>\r\n        Create Lead\r\n      </Typography>\r\n\r\n      <Paper sx={{ p: 3, maxWidth: 600 }}>\r\n        <Stack spacing={2}>\r\n          <TextField\r\n            label=\"Name\"\r\n            name=\"name\"\r\n            value={form.name}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n\r\n          <TextField\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            value={form.email}\r\n            onChange={handleChange}\r\n            type=\"email\"\r\n          />\r\n\r\n          <TextField\r\n            label=\"Phone\"\r\n            name=\"phone\"\r\n            value={form.phone}\r\n            onChange={handleChange}\r\n          />\r\n\r\n          <TextField\r\n            select\r\n            label=\"Source\"\r\n            name=\"source\"\r\n            value={form.source}\r\n            onChange={handleChange}\r\n            required\r\n          >\r\n            <MenuItem value=\"website\">Website</MenuItem>\r\n            <MenuItem value=\"referral\">Referral</MenuItem>\r\n            <MenuItem value=\"ads\">Ads</MenuItem>\r\n            <MenuItem value=\"social\">Social</MenuItem>\r\n          </TextField>\r\n\r\n          <TextField\r\n            select\r\n            label=\"Status\"\r\n            name=\"status\"\r\n            value={form.status}\r\n            onChange={handleChange}\r\n            required\r\n          >\r\n            <MenuItem value=\"new\">New</MenuItem>\r\n            <MenuItem value=\"contacted\">Contacted</MenuItem>\r\n            <MenuItem value=\"converted\">Converted</MenuItem>\r\n            <MenuItem value=\"lost\">Lost</MenuItem>\r\n          </TextField>\r\n\r\n          {error && <Alert severity=\"error\">{error}</Alert>}\r\n          {duplicateError && (\r\n            <Alert severity=\"warning\">\r\n                {duplicateError}\r\n            </Alert>\r\n            )}\r\n\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n          >\r\n            Create Lead\r\n          </Button>\r\n        </Stack>\r\n      </Paper>\r\n\r\n       <Dialog\r\n        open={showDuplicateModal}\r\n        onClose={() => setShowDuplicateModal(false)}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        >\r\n        <DialogTitle>Possible Duplicate Leads Found</DialogTitle>\r\n\r\n        <DialogContent>\r\n            <Alert severity=\"warning\" sx={{ mb: 2 }}>\r\n            These leads closely match the information you entered. Please review\r\n            before proceeding.\r\n            </Alert>\r\n\r\n            <Stack spacing={2}>\r\n            {duplicates.map((lead) => (\r\n                <Paper\r\n                key={lead.id}\r\n                variant=\"outlined\"\r\n                sx={{ p: 2 }}\r\n                >\r\n                <Stack direction=\"row\" spacing={3} alignItems=\"flex-start\">\r\n                    {/* Confidence */}\r\n                    <Box width={120}>\r\n                    <Typography variant=\"caption\" fontWeight={600}>\r\n                        {lead.confidence}% Match\r\n                    </Typography>\r\n\r\n                    <LinearProgress\r\n                        variant=\"determinate\"\r\n                        value={lead.confidence}\r\n                        color={\r\n                        lead.confidence >= 80\r\n                            ? 'error'\r\n                            : lead.confidence >= 60\r\n                            ? 'warning'\r\n                            : 'success'\r\n                        }\r\n                        sx={{ height: 6, borderRadius: 3, mt: 0.5 }}\r\n                    />\r\n                    </Box>\r\n\r\n                    {/* Lead Details */}\r\n                    <Box flex={1}>\r\n                    <Typography fontWeight={600}>{lead.name}</Typography>\r\n\r\n                    {lead.email && (\r\n                        <Typography variant=\"body2\">\r\n                        <strong>Email:</strong> {lead.email}\r\n                        </Typography>\r\n                    )}\r\n\r\n                    {lead.phone && (\r\n                        <Typography variant=\"body2\">\r\n                        <strong>Phone:</strong> {lead.phone}\r\n                        </Typography>\r\n                    )}\r\n\r\n                    <Divider sx={{ my: 1 }} />\r\n\r\n                    {/* Matched Fields */}\r\n                    <Typography variant=\"caption\" fontWeight={600}>\r\n                        Matched Fields\r\n                    </Typography>\r\n\r\n                    <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" mt={0.5}>\r\n                        {lead.matchedOn.map((field: string) => (\r\n                        <Chip\r\n                            key={field}\r\n                            label={field}\r\n                            size=\"small\"\r\n                            color=\"warning\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                        ))}\r\n                    </Stack>\r\n                    </Box>\r\n                </Stack>\r\n                </Paper>\r\n            ))}\r\n            </Stack>\r\n\r\n            <Typography\r\n            variant=\"caption\"\r\n            color=\"text.secondary\"\r\n            mt={2}\r\n            display=\"block\"\r\n            >\r\n            You can still create the lead and resolve duplicates later if needed.\r\n            </Typography>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n            <Button\r\n            onClick={() => setShowDuplicateModal(false)}\r\n            color=\"inherit\"\r\n            >\r\n            Cancel\r\n            </Button>\r\n\r\n            <Button\r\n            variant=\"contained\"\r\n            color=\"warning\"\r\n            onClick={() => {\r\n                setShowDuplicateModal(false);\r\n                createLead();\r\n            }}\r\n            >\r\n            Create Anyway\r\n            </Button>\r\n        </DialogActions>\r\n        </Dialog>\r\n\r\n\r\n\r\n    </Box>\r\n\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}