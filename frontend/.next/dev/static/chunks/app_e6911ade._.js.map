{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Lead-management-system/frontend/app/services/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_BASE_URL,\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (typeof window !== 'undefined') {\r\n      const status = error.response?.status;\r\n\r\n      if (status === 401) {\r\n        console.warn('Unauthorized - redirecting to login');\r\n        localStorage.removeItem('token');\r\n        window.location.href = '/login';\r\n      }\r\n\r\n      if (status === 500) {\r\n        console.error('Server error');\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;AAGW;AAHX;;AAEA,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,OAAO;IACP,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,wCAAmC;QACjC,MAAM,SAAS,MAAM,QAAQ,EAAE;QAE/B,IAAI,WAAW,KAAK;YAClB,QAAQ,IAAI,CAAC;YACb,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;QAEA,IAAI,WAAW,KAAK;YAClB,QAAQ,KAAK,CAAC;QAChB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///D:/Lead-management-system/frontend/app/services/leadService.tsx"],"sourcesContent":["import api from './api';\r\n\r\nconst leadService = {\r\n  getLeads: (params?: Record<string, any>) =>\r\n    api.get('/leads', { params }),\r\n\r\n  getLeadById: (id: number) =>\r\n    api.get(`/leads/${id}/timeline`),\r\n\r\n  createLead: (data: any) =>\r\n    api.post('/leads', data),\r\n\r\n  updateStatus: (id: number, status: string) =>\r\n    api.put(`/leads/${id}/status`, { status }),\r\n  \r\n  CheckDuplicateLead: (data: any) =>\r\n    api.post('/leads/check-duplicate', data),\r\n};\r\n\r\nexport default leadService;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc;IAClB,UAAU,CAAC,SACT,oIAAG,CAAC,GAAG,CAAC,UAAU;YAAE;QAAO;IAE7B,aAAa,CAAC,KACZ,oIAAG,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,GAAG,SAAS,CAAC;IAEjC,YAAY,CAAC,OACX,oIAAG,CAAC,IAAI,CAAC,UAAU;IAErB,cAAc,CAAC,IAAY,SACzB,oIAAG,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,EAAE;YAAE;QAAO;IAE1C,oBAAoB,CAAC,OACnB,oIAAG,CAAC,IAAI,CAAC,0BAA0B;AACvC;uCAEe"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///D:/Lead-management-system/frontend/app/leads/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useMemo } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Chip,\r\n  MenuItem,\r\n  Select,\r\n  FormControl,\r\n  InputLabel,\r\n  Pagination,\r\n  Stack,\r\n  Button \r\n} from '@mui/material';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport leadService from '../services/leadService';\r\n\r\n/* ================= TYPES ================= */\r\n\r\ninterface AssignedUser {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\ninterface Lead {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  status: string;\r\n  source?: string;\r\n  assignedUser?: AssignedUser | null;\r\n  updatedAt: string;\r\n}\r\n\r\n/* ================= COMPONENT ================= */\r\n\r\nexport default function LeadsPage() {\r\n  const router = useRouter();\r\n  const [leads, setLeads] = useState<Lead[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n\r\n  // Filters\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [sourceFilter, setSourceFilter] = useState<string>('all');\r\n\r\n  // Pagination\r\n  const [currentPage, setCurrentPage] = useState<number>(1);\r\n  const itemsPerPage = 10;\r\n\r\n  useEffect(() => {\r\n    fetchLeads();\r\n  }, []);\r\n\r\n  const fetchLeads = async (): Promise<void> => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await leadService.getLeads();\r\n      setLeads(res.data.data.rows);\r\n    } catch (error) {\r\n      console.error('Failed to fetch leads', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filtered leads\r\n  const filteredLeads = useMemo(() => {\r\n    return leads.filter((lead) => {\r\n      const statusMatch =\r\n        statusFilter === 'all' ? true : lead.status === statusFilter;\r\n      const sourceMatch =\r\n        sourceFilter === 'all' ? true : lead.source === sourceFilter;\r\n      return statusMatch && sourceMatch;\r\n    });\r\n  }, [leads, statusFilter, sourceFilter]);\r\n\r\n  // Pagination logic\r\n  const totalPages = Math.ceil(filteredLeads.length / itemsPerPage);\r\n  const paginatedLeads = useMemo(() => {\r\n    const startIndex = (currentPage - 1) * itemsPerPage;\r\n    return filteredLeads.slice(startIndex, startIndex + itemsPerPage);\r\n  }, [filteredLeads, currentPage]);\r\n\r\n  return (\r\n    <Box p={3}>\r\n      <Typography variant=\"h5\" fontWeight={600} mb={2}>\r\n        Leads\r\n      </Typography>\r\n\r\n      {/* Filters */}\r\n      <Stack direction=\"row\" spacing={2} mb={2}>\r\n        <FormControl size=\"small\">\r\n          <InputLabel>Status</InputLabel>\r\n          <Select\r\n            value={statusFilter}\r\n            label=\"Status\"\r\n            onChange={(e) => {\r\n              setStatusFilter(e.target.value);\r\n              setCurrentPage(1); // Reset page on filter change\r\n            }}\r\n          >\r\n            <MenuItem value=\"all\">All</MenuItem>\r\n            <MenuItem value=\"new\">New</MenuItem>\r\n            <MenuItem value=\"contacted\">Contacted</MenuItem>\r\n            <MenuItem value=\"lost\">Lost</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n\r\n        <FormControl size=\"small\">\r\n          <InputLabel>Source</InputLabel>\r\n          <Select\r\n            value={sourceFilter}\r\n            label=\"Source\"\r\n            onChange={(e) => {\r\n              setSourceFilter(e.target.value);\r\n              setCurrentPage(1);\r\n            }}\r\n          >\r\n            <MenuItem value=\"all\">All</MenuItem>\r\n            <MenuItem value=\"website\">Website</MenuItem>\r\n            <MenuItem value=\"referral\">Referral</MenuItem>\r\n            <MenuItem value=\"ads\">Ads</MenuItem>\r\n            <MenuItem value=\"social\">Social</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n\r\n          <Button\r\n            variant=\"contained\"\r\n            startIcon={<AddIcon />}\r\n            onClick={() => router.push('/leads/new')}\r\n          >\r\n            Create New Lead\r\n          </Button>\r\n\r\n      </Stack>\r\n\r\n  \r\n\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Name</TableCell>\r\n              <TableCell>Email</TableCell>\r\n              <TableCell>Status</TableCell>\r\n              <TableCell>Source</TableCell>\r\n              <TableCell>Assigned User</TableCell>\r\n              <TableCell>Last Activity</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n\r\n          <TableBody>\r\n            {paginatedLeads.map((lead) => (\r\n              <TableRow\r\n                key={lead.id}\r\n                hover\r\n                sx={{ cursor: 'pointer' }}\r\n                onClick={() => router.push(`/leads/${lead.id}`)}\r\n              >\r\n                <TableCell>{lead.name}</TableCell>\r\n                <TableCell>{lead.email}</TableCell>\r\n                <TableCell>\r\n                  <Chip\r\n                    label={lead.status}\r\n                    size=\"small\"\r\n                    color={\r\n                      lead.status === 'converted'\r\n                        ? 'success'\r\n                        : lead.status === 'lost'\r\n                        ? 'error'\r\n                        : 'default'\r\n                    }\r\n                  />\r\n                </TableCell>\r\n                <TableCell>{lead.source || '-'}</TableCell>\r\n                <TableCell>{lead.assignedUser?.name || '-'}</TableCell>\r\n                <TableCell>\r\n                  {new Date(lead.updatedAt).toLocaleString()}\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n\r\n            {!loading && filteredLeads.length === 0 && (\r\n              <TableRow>\r\n                <TableCell colSpan={6} align=\"center\">\r\n                  No leads found\r\n                </TableCell>\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <Stack mt={2} alignItems=\"center\">\r\n          <Pagination\r\n            count={totalPages}\r\n            page={currentPage}\r\n            onChange={(_, page) => setCurrentPage(page)}\r\n            color=\"primary\"\r\n          />\r\n        </Stack>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}